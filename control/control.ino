#include <Wire.h>
#include <avr/pgmspace.h>

//rs485 pin
int txden = 8;
const int frame_number = 5;

const byte frames[frame_number][4][32] PROGMEM =
{{{0x80,0x83,0x00,0x0,0x0,0x0,0x10,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x8,0x0,0x0,0x0,0x0,0x40,0x0,0x0,0x0,0x0,0x0,0x2,0x0,0x0,0x10,0x0,0x0,0x8F},{0x80,0x83,0x01,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x1,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x40,0x0,0x0,0x0,0x4,0x0,0x0,0x40,0x0,0x8F},{0x80,0x83,0x02,0x0,0x0,0x0,0x2,0x0,0x0,0x0,0x0,0x20,0x2,0x0,0x0,0x0,0x0,0x0,0x40,0x50,0x5a,0x39,0x53,0x49,0x5a,0x10,0x40,0x0,0x0,0x0,0x0,0x8F},{0x80,0x83,0x03,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7e,0x7e,0x7c,0x7d,0x7d,0x7e,0x7d,0x7c,0x7e,0x7e,0x7e,0x7f,0x7f,0x7f,0x8F}},{{0x80,0x83,0x00,0x0,0x0,0x0,0x0,0x4,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x40,0x2,0x0,0x0,0x0,0x0,0x0,0x4,0x0,0x0,0x0,0x8F},{0x80,0x83,0x01,0x0,0x0,0x0,0x4,0x0,0x0,0x0,0x0,0x20,0x0,0x2,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x40,0x0,0x0,0x8,0x0,0x0,0x0,0x0,0x2,0x8F},{0x80,0x83,0x02,0x0,0x0,0x10,0x0,0x0,0x0,0x0,0x0,0x0,0x10,0x0,0x0,0x0,0x0,0x0,0x40,0x50,0x5a,0x39,0x53,0x49,0x5a,0x10,0x40,0x0,0x2,0x0,0x0,0x8F},{0x80,0x83,0x03,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7e,0x7e,0x7c,0x7d,0x7d,0x7e,0x7d,0x7c,0x7e,0x7e,0x7e,0x7f,0x7f,0x7f,0x8F}},{{0x80,0x83,0x00,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x4,0x0,0x0,0x0,0x0,0x0,0x0,0x4,0x0,0x0,0x0,0x0,0x0,0x40,0x0,0x0,0x4,0x0,0x0,0x0,0x8F},{0x80,0x83,0x01,0x0,0x20,0x0,0x0,0x2,0x0,0x0,0x0,0x0,0x10,0x0,0x0,0x10,0x0,0x0,0x0,0x0,0x0,0x0,0x40,0x0,0x0,0x0,0x0,0x0,0x40,0x2,0x0,0x8F},{0x80,0x83,0x02,0x0,0x0,0x0,0x0,0x0,0x2,0x0,0x0,0x20,0x0,0x0,0x0,0x4,0x0,0x0,0x40,0x50,0x5a,0x39,0x53,0x49,0x5a,0x10,0x40,0x0,0x0,0x0,0x20,0x8F},{0x80,0x83,0x03,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7e,0x7e,0x7c,0x7d,0x7d,0x7e,0x7d,0x7c,0x7e,0x7e,0x7e,0x7f,0x7f,0x7f,0x8F}},{{0x80,0x83,0x00,0x0,0x0,0x0,0x0,0x8,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x20,0x0,0x0,0x0,0x0,0x0,0x2,0x0,0x0,0x0,0x0,0x0,0x4,0x0,0x0,0x0,0x8F},{0x80,0x83,0x01,0x0,0x0,0x0,0x0,0x10,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x8,0x0,0x0,0x0,0x0,0x40,0x0,0x0,0x0,0x0,0x0,0x0,0x8,0x0,0x8F},{0x80,0x83,0x02,0x0,0x8,0x0,0x0,0x0,0x0,0x0,0x0,0x10,0x1,0x0,0x0,0x0,0x0,0x0,0x40,0x50,0x5a,0x39,0x53,0x49,0x5a,0x10,0x40,0x0,0x0,0x0,0x4,0x8F},{0x80,0x83,0x03,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7e,0x7e,0x7c,0x7d,0x7d,0x7e,0x7d,0x7c,0x7e,0x7e,0x7e,0x7f,0x7f,0x7f,0x8F}},{{0x80,0x83,0x00,0x0,0x0,0x0,0x10,0x0,0x0,0x0,0x0,0x1,0x0,0x0,0x0,0x0,0x0,0x20,0x0,0x0,0x0,0x2,0x0,0x0,0x0,0x0,0x10,0x0,0x0,0x0,0x0,0x8F},{0x80,0x83,0x01,0x0,0x0,0x0,0x2,0x0,0x0,0x0,0x8,0x0,0x0,0x0,0x0,0x0,0x0,0x20,0x0,0x0,0x0,0x0,0x40,0x0,0x4,0x0,0x0,0x0,0x10,0x0,0x0,0x8F},{0x80,0x83,0x02,0x0,0x0,0x4,0x0,0x0,0x0,0x0,0x0,0x20,0x0,0x0,0x0,0x0,0x0,0x0,0x40,0x50,0x5a,0x39,0x53,0x49,0x5a,0x10,0x40,0x0,0x0,0x0,0x4,0x8F},{0x80,0x83,0x03,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7e,0x7e,0x7c,0x7d,0x7d,0x7e,0x7d,0x7c,0x7e,0x7e,0x7e,0x7f,0x7f,0x7f,0x8F}}};


void write_frame(int i)
{
  byte one_frame[4][32] = {{}};
  for (int r = 0; r < 4; r ++){
    for (int l = 0; l < 32; l ++){
      one_frame[r][l] = pgm_read_byte(&frames[i-1][r][l]);
    }
  }
  Serial.write(one_frame[0], 32);
  Serial.write(one_frame[1], 32);
  Serial.write(one_frame[2], 32);
  Serial.write(one_frame[3], 32);
}

void setup()
{
  Serial.begin(9600);
  pinMode(txden, OUTPUT);
  digitalWrite(txden, HIGH); // master
  write_frame(0);
}

void showtime(){
    write_frame(1); //corresponding the image index in the folder
    delay(500); //1000 is 1 second
    write_frame(2);
    delay(500);
    write_frame(3);
    delay(500);
    write_frame(4);
    delay(500);
    write_frame(5);
    delay(500);
}

void loop() {
  showtime();
}
