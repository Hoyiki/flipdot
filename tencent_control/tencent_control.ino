#include <Wire.h>
#include <avr/pgmspace.h>

//rs485
int txden = 8;

long duration, distance, RightSensor,MiddleSensor,LeftSensor;

byte a_stripes[] = {0x80, 0x83, 0x00, 0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x8F};
byte b_stripes[] = {0x80, 0x83, 0x01, 0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x8F};

byte c_stripes[] = {0x80, 0x83, 0x02, 
0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f
,0x8F};

byte d_stripes[] = {0x80, 0x83, 0x03, 
0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f
,0x8F};

const byte tencent_frames[4][4][32] PROGMEM =
{{{0x80,0x83,0x00,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x8F},{0x80,0x83,0x01,0x7f,0x37,0x37,0x77,0x7,0x7,0x3f,0x7,0x63,0x2f,0x6f,0x2f,0xf,0x7f,0x7f,0x73,0x67,0x6f,0x7f,0x7,0x73,0x73,0x3,0x7,0x77,0x7,0x7,0x7f,0x8F},{0x80,0x83,0x02,0x7f,0x1f,0x46,0x60,0x78,0x73,0x17,0x4f,0x63,0x78,0x61,0x4e,0x1f,0x5f,0x5f,0x1e,0x40,0x40,0x5f,0x10,0x1b,0x1b,0x0,0x0,0x13,0x10,0x18,0x7f,0x8F},{0x80,0x83,0x03,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x8F}},{{0x80,0x83,0x00,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x8F},{0x80,0x83,0x01,0x7f,0x7f,0x3,0x5b,0x3,0x5f,0x53,0x13,0x43,0x53,0x57,0x13,0x57,0x5f,0x7f,0x1f,0x1b,0x13,0x7f,0x7b,0x7b,0x3,0x7b,0x7b,0x3,0x3,0x7f,0x7f,0x8F},{0x80,0x83,0x02,0x7f,0x47,0x60,0x1d,0x0,0x7e,0x6a,0x68,0x6a,0x4a,0x8,0x18,0x42,0x7e,0x7f,0x7f,0x41,0x40,0x67,0x7e,0x7e,0x0,0x7e,0x7e,0x78,0x40,0x47,0x7f,0x8F},{0x80,0x83,0x03,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,0x8F}},{{0x80,0x83,0x00,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x8F},{0x80,0x83,0x01,0x0,0x0,0x0,0x0,0x40,0x70,0x78,0x7c,0x7c,0x3c,0x38,0x60,0x0,0x0,0x0,0x0,0x70,0x78,0x3c,0x3c,0x7c,0x78,0x70,0x0,0x0,0x0,0x0,0x0,0x8F},{0x80,0x83,0x02,0x0,0x0,0x0,0x0,0x3,0x3f,0x3f,0x7f,0x7f,0x38,0x38,0xf,0x0,0x0,0x0,0x0,0x1f,0x3c,0x7e,0x7e,0x7d,0x3f,0x1f,0x1,0x0,0x0,0x0,0x0,0x8F},{0x80,0x83,0x03,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x8F}},{{0x80,0x83,0x00,0x0,0x0,0x0,0x0,0x0,0x0,0x60,0x10,0x8,0x4,0x4,0x0,0x2,0x2,0x2,0x2,0x0,0x4,0x4,0x8,0x10,0x60,0x0,0x0,0x0,0x0,0x0,0x0,0x8F},{0x80,0x83,0x01,0x0,0x0,0x0,0x0,0x70,0xf,0x1,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x1,0xf,0x70,0x0,0x0,0x0,0x0,0x8F},{0x80,0x83,0x02,0x0,0x0,0x3c,0x43,0x40,0x20,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x20,0x40,0x43,0x3c,0x0,0x0,0x8F},{0x80,0x83,0x03,0x0,0x0,0x0,0x0,0x0,0x16,0x1,0x20,0x20,0x20,0x20,0x0,0x0,0x10,0x10,0x0,0x0,0x20,0x20,0x20,0x20,0x1,0x16,0x0,0x0,0x0,0x0,0x0,0x8F}}};


void write_frame(int i)
{
  byte one_frame[4][32] = {{}};
  for (int r = 0; r < 4; r ++){
    for (int l = 0; l < 32; l ++){
      one_frame[r][l] = pgm_read_byte(&tencent_frames[i][r][l]);
    }
  }
  Serial.write(one_frame[0], 32);
  Serial.write(one_frame[1], 32);
  Serial.write(one_frame[2], 32);
  Serial.write(one_frame[3], 32);
}

void write_white(){
  Serial.write(a_stripes, 32);
  Serial.write(b_stripes, 32);
  Serial.write(c_stripes, 32);
  Serial.write(d_stripes, 32);
}



void setup() 
{
  Serial.begin(9600);
  pinMode(txden, OUTPUT);
  digitalWrite(txden, HIGH); // master 
  write_white();
}

void showtime(){
    write_frame(0); 
    delay(3000); 
    write_frame(1); 
    delay(3000); 
    write_frame(2); 
    delay(3000); 
    write_frame(3); 
    delay(3000); 

}


void loop() { 

  showtime();

}
